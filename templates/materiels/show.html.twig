{% extends "baseC.html.twig" %}
{% block title %}Materiels{% endblock %}
{% block breadcrumb %}Materiels{% endblock %}
{% block  breadcrumb_item %}Gestion du materiel{% endblock %}
{% block  breadcrumb_t %} Détails d'un Matériel {% endblock %}
{% block content %}

    <div class="user-profile">
        <div class="row">
            <!-- user profile first-style start-->
            <div class="col-sm-12">
                <div class="card hovercard text-center common-user-image">
                    <div class="cardheader" style="height: 235px;">
                        <div class="user-image">
                            <div class="avatar">
                                <div class="common-align">
                                    <div>
                                        {% if materiel.imageFilename %}
                                            <img id="output" src="{{ asset('uploads/' ~ materiel.imageFilename) }}"
                                                 alt="Profile Image">
                                        {% else %}
                                            <img id="output" src="{{ asset('cuba/assets/images/other-images/car.png') }}" alt="Profile
                                            Image">
                                        {% endif %}
                                        <input type="file" accept="image/*" onchange="loadFile(event)">
                                        <div class="icon-wrapper" id="cancelButton"><i
                                                    class="icofont icofont-error"></i></div>
                                        <div class="icon-wrapper"><i class="icofont icofont-pencil-alt-5"></i></div>
                                    </div>
                                    <div class="user-designation f-w-900 f-28">
                                        <a target="_blank" href="" class="f-w-900 f-28 fw-bold">{{ materiel
                                            .marque.libelle
                                            }} - {{ materiel
                                            .modele }}</a>
                                        <div class="desc  fw-bold">Immatriculation : {{ materiel
                                            .immatriculation
                                            | default
                                                ('Non attribuée') }}</div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- user profile menu start-->
            <div class="col-12">
                <div class="row scope-bottom-wrapper user-profile-wrapper">
                    <div class="col-xxl-3 user-xl-25 col-xl-4 box-col-4">
                        <div class="card">
                            <div class="card-body">
                                <ul class="sidebar-left-icons nav nav-pills" id="add-product-pills-tab"
                                    role="tablist">
                                    <li class="nav-item"><a class="nav-link active" id="target-project-tab"
                                                            data-bs-toggle="pill" href="#target-project" role="tab"
                                                            aria-controls="target-project" aria-selected="false">
                                            <div class="nav-rounded">
                                                <div class="product-icons"><i class="fa-solid fa-timeline"></i>
                                                </div>
                                            </div>
                                            <div class="product-tab-content">
                                                <h6>Caractéristiques</h6>
                                            </div>
                                        </a></li>
                                    <li class="nav-item"><a class="nav-link" id="budget-project-tab"
                                                            data-bs-toggle="pill" href="#budget-project" role="tab"
                                                            aria-controls="budget-project" aria-selected="false">
                                            <div class="nav-rounded">
                                                <div class="product-icons"><i class="fa-solid fa-list-check"></i>
                                                </div>
                                            </div>
                                            <div class="product-tab-content">
                                                <h6>Affectation</h6>
                                            </div>
                                        </a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xxl-9 user-xl-75 col-xl-8 box-col-8e">
                        <div class="row">
                            <div class="col-12">
                                <div class="tab-content" id="add-product-pills-tabContent">
                                    <div class="tab-pane fade show active" id="target-project" role="tabpanel"
                                         aria-labelledby="target-project-tab">
                                        <div class="notification">
                                            <div class="card">
                                                <div class="card-header border-l-success border-3">
                                                    <h5>Caractéristiques du Matériel</h5>
                                                </div>
                                                <div class="card-body dark-timeline">
                                                    <div class="w-100 ms-3">
                                                        <ul class="list-group">
                                                            <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark">Numéro de Série :</strong> &nbsp; {{ materiel.numeroSerie | default('Non spécifié') }}</li>
                                                            <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark">Type :</strong> &nbsp; {{ materiel.type.libelle | default('Non spécifié') }}</li>
                                                            <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark">Statut :</strong> &nbsp;
                                                                {% if materiel.statut == 0 %}
                                                                    <span class="badge bg-gradient-secondary">Non Affecté (NA)</span>
                                                                {% elseif materiel.statut == 1 %}
                                                                    <span class="badge bg-gradient-info">Affecté (A)</span>
                                                                {% elseif materiel.statut == 3 %}
                                                                    <span class="badge bg-gradient-warning">NA / En Maintenance </span>
                                                                {% elseif materiel.statut == 2 %}
                                                                    <span class="badge bg-gradient-success">A / En Maintenance </span>
                                                                {% endif %}
                                                            </li>
                                                            <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark">Date d'Acquisition :</strong> &nbsp; {{ materiel.dateAcquisition ? materiel.dateAcquisition|date('d/m/Y') : 'Non spécifié' }}</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="budget-project" role="tabpanel"
                                             aria-labelledby="budget-project-tab">
                                            <div class="card">
                                                <div class="card-header border-l-success border-3">
                                                    <h5>Employé qui utilise ce matériel</h5>
                                                </div>
                                                <div class="card-body projects-wrapper">
                                                    <div class="w-100 ms-3">
                                                        <ul class="list-group">
                                                            {% for affectation in materiel.affectations %}
                                                                <li class="list-group-item border-0 ps-0 text-sm">
                                                                    <strong class="text-dark">{{ affectation.employe.nom }} {{ affectation.employe.prenom }}</strong> - {{ affectation.dateAffectation | date('d/m/Y') }}
                                                                </li>
                                                            {% else %}
                                                                <li class="list-group-item border-0 ps-0 text-sm">Aucun employé affecté</li>
                                                            {% endfor %}
                                                        </ul>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- user profile menu end-->
            </div>
        </div>
    </div>



{% endblock %}
