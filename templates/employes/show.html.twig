{% extends "baseC.html.twig" %}
 {% block title %}Employés{% endblock %}
    {% block breadcrumb %}EMPLOYES{% endblock %}
    {% block  breadcrumb_item %} Employés{% endblock %}
    {% block  breadcrumb_t %} Gestion des Employés{% endblock %}
{% block content %}

<!-- Container-fluid starts-->
<div class="container-fluid">
    <div class="user-profile">
        <div class="row">
            <!-- user profile first-style start-->
            <div class="col-sm-12">
                <div class="card hovercard text-center common-user-image">
                    <div class="cardheader" style="height: 235px;">
                        <div class="user-image">
                            <div class="avatar">
                                <div class="common-align">
                                    <div>
                                        {% if employe.photo %}
                                            <img id="output" src="{{ asset('uploads/' ~ employe.photo) }}"
                                                 alt="Profile Image">
                                        {% else %}
                                            <img id="output" src="{{ asset('cuba/assets/images/dashboard-11/user/12
                                                .jpg') }}" alt="Profile Image">
                                        {% endif %}
                                        <input type="file" accept="image/*" onchange="loadFile(event)">
                                        <div class="icon-wrapper" id="cancelButton"><i
                                                    class="icofont icofont-error"></i></div>
                                        <div class="icon-wrapper"><i class="icofont icofont-pencil-alt-5"></i></div>
                                    </div>
                                    <div class="user-designation"><a target="_blank"
                                                                     href="">{{ employe.nom }} {{ employe.prenom }}</a>
                                        <div class="desc">{{ employe.poste ? employe.poste.libelle : 'Non attribué' }}</div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- user profile first-style end-->
            <div class="col-12">
                <div class="card user-bio">
                    <div class="card-body">
                        <div class="row g-3">
                            {#                                <div class="col-12"> #}
                            {#                                    <div class="ttl-info text-start"> #}
                            {#                                        <h6> <i class="fa-solid fa-user-tie pe-2"></i> Bio</h6><span class="mb-sm-3">Over five years of experience creating visually attractive and user-friendly websites has given me a passion for creating unique and creative websites. skilled in fusing cutting-edge online technologies with beautiful design concepts to create amazing user experiences. robust history in front-end development, UI/UX, and graphic design. highly skilled at solving problems, has a keen eye for detail, and can collaborate with others in a hectic setting.</span> #}
                            {#                                    </div> #}
                            {#                                </div> #}
                            <div class="col-lg-3 col-md-4 col-sm-6">
                                <div class="ttl-info text-start">
                                    <h6><i class="fa-solid fa-envelope pe-2"></i> Email</h6>
                                    <span> {{ employe.email ?? 'Non spécifié' }}</span>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-4 col-sm-6">
                                <div class="ttl-info text-start">
                                    <h6><i class="fa-solid fa-phone pe-2"></i>Telephone personnel</h6>
                                    <span> {{ employe.telephonePersonnel ?? 'Non Spécifié' }}</span>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-4 col-sm-6">
                                <div class="ttl-info text-start pb-0">
                                    <h6><i class="fa-solid fa-location-arrow pe-2"></i>Telephone
                                        Corporate</h6><span{{ employe.telephoneCorporate ?? 'Non Spécifié' }}</span>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <!-- user profile menu start-->
            <div class="col-12">
                <div class="row scope-bottom-wrapper user-profile-wrapper">
                    <div class="col-xxl-3 user-xl-25 col-xl-4 box-col-4">
                        <div class="card">
                            <div class="card-body">
                                <ul class="sidebar-left-icons nav nav-pills" id="add-product-pills-tab"
                                    role="tablist">
                                    <li class="nav-item"><a class="nav-link active" id="target-project-tab"
                                                            data-bs-toggle="pill" href="#target-project" role="tab"
                                                            aria-controls="target-project" aria-selected="false">
                                            <div class="nav-rounded">
                                                <div class="product-icons"><i class="fa-solid fa-timeline"></i>
                                                </div>
                                            </div>
                                            <div class="product-tab-content">
                                                <h6>Matériel Affecté</h6>
                                            </div>
                                        </a></li>
                                    <li class="nav-item"><a class="nav-link" id="budget-project-tab"
                                                            data-bs-toggle="pill" href="#budget-project" role="tab"
                                                            aria-controls="budget-project" aria-selected="false">
                                            <div class="nav-rounded">
                                                <div class="product-icons"><i class="fa-solid fa-list-check"></i>
                                                </div>
                                            </div>
                                            <div class="product-tab-content">
                                                <h6>Documents</h6>
                                            </div>
                                        </a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xxl-9 user-xl-75 col-xl-8 box-col-8e">
                        <div class="row">
                            <div class="col-12">
                                <div class="tab-content" id="add-product-pills-tabContent">
                                    <div class="tab-pane fade show active" id="target-project" role="tabpanel"
                                         aria-labelledby="target-project-tab">
                                        <div class="notification">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h5>Affectation Materiel</h5>
                                                </div>
                                                <div class="card-body dark-timeline">
                                                    <div class="w-100 ms-3">
                                                        <ul class="list-group">
                                                            {% for affectation in employe.affectations %}
                                                                <li class="list-group-item border-0 ps-0 text-sm">
                                                                    <strong class="text-dark">{{ affectation.materiel.marque.libelle | default('N/A') }}
                                                                        - {{ affectation.materiel.immatriculation | default('N/A') }}</strong>
                                                                </li>
                                                            {% else %}
                                                                <li class="list-group-item border-0 ps-0 text-sm">Aucune
                                                                    affectation
                                                                </li>
                                                            {% endfor %}
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="budget-project" role="tabpanel"
                                             aria-labelledby="budget-project-tab">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h5>Pièces justificatives de l'employé</h5>
                                                </div>
                                                <div class="card-body projects-wrapper">
                                                    <div class="row g-4">


                                                        {% set documents = {
                                                            'copieCarteId': "Pièce d'Identité",
                                                            'copieDiplome': "Diplôme",
                                                            'certificatAcquiteVisuel': "Certificat Visuel"
                                                        } %}

                                                        {% set hasDocuments = false %}

                                                        {% for key, label in documents %}
                                                            {% set doc = attribute(employe, key) %}
                                                            {% if doc %}
                                                                {% set hasDocuments = true %}
                                                                <div class="col-xxl-4 col-md-6 box-col-6 xl-50">
                                                                    <div class="card card-blog card-plain">
                                                                        <div class="card-header p-0 m-2">
                                                                            <a class="d-block shadow-xl border-radius-xl">
                                                                                {% if doc matches '/\.pdf$/' %}
                                                                                    <img src="{{ asset('assets/images/pdf-placeholder.png') }}"
                                                                                         alt="PDF"
                                                                                         class="img-fluid shadow border-radius-lg">
                                                                                {% else %}
                                                                                    <img src="{{ asset('uploads/' ~ doc) }}"
                                                                                         alt="Document"
                                                                                         class="img-fluid shadow border-radius-lg">
                                                                                {% endif %}
                                                                            </a>
                                                                        </div>
                                                                        <div class="card-body p-3">
                                                                            <p class="mb-0 text-sm">{{ label }}</p>
                                                                            <a href="{{ asset('uploads/' ~ doc) }}"
                                                                               target="_blank">
                                                                                <button type="button"
                                                                                        class="btn btn-outline-primary btn-sm mb-0">
                                                                                    Voir le document
                                                                                </button>
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            {% endif %}
                                                        {% endfor %}

                                                        {% if not hasDocuments %}
                                                            <p class="text-center text-muted">Aucun document n'a été
                                                                ajouté pour cet employé.</p>
                                                        {% endif %}
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- user profile menu end-->
            </div>
        </div>
    </div>
    <!-- Container-fluid Ends-->
    {% endblock %}

    {% block scripts %}
        <script src="{{ asset('cuba/assets/js/counter/jquery.waypoints.min.js') }}"></script>
        <script src="{{ asset('cuba/assets/js/counter/jquery.counterup.min.js') }}"></script>
        <script src="{{ asset('cuba/assets/js/counter/counter-custom.js') }}"></script>
        <script src="{{ asset('cuba/assets/js/photoswipe/photoswipe.min.js') }}"></script>
        <script src="{{ asset('cuba/assets/js/photoswipe/photoswipe-ui-default.min.js') }}"></script>
        <script src="{{ asset('assets/js/photoswipe/photoswipe.js') }}"></script>
        <script src="{{ asset('cuba/assets/js/tooltip-init.js') }}"></script>
    {% endblock %}




    {# {% extends 'base.html.twig' %} #}

    {# {% block title %}Détails de l'Employe{% endblock %} #}

    {# {% block breadcrumb %}EMLPLOYES > Détails de l'Employé{% endblock %} #}

    {# {% block content %} #}

    {#    <div class="container-fluid px-2 px-md-4"> #}
    {#        <div class="page-header min-height-300 border-radius-xl mt-4" style="background-image: url('{{ asset('assets/img/employe-background.jpg') }}');"> #}
    {#            <span class="mask bg-gradient-dark opacity-6"></span> #}
    {#        </div> #}
    {#        <div class="card card-body mx-2 mx-md-2 mt-n6"> #}
    {#            <div class="row gx-4 mb-2"> #}
    {#                <div class="col-auto"> #}
    {#                    <div class="avatar avatar-xl position-relative"> #}
    {#                        {% if employe.photo %} #}
    {#                            <img src="{{ asset('uploads/' ~ employe.photo) }}" class="w-100 border-radius-lg shadow-sm" alt="Photo de l'employé"> #}
    {#                        {% else %} #}
    {#                            <img src="{{ asset('assets/img/account-avatar.png') }}" class="w-100 border-radius-lg shadow-sm" alt="Avatar par défaut"> #}
    {#                        {% endif %} #}
    {#                    </div> #}
    {#                </div> #}
    {#                <div class="col-auto my-auto"> #}
    {#                    <div class="h-100"> #}
    {#                        <h5 class="mb-1">{{ employe.nom }} {{ employe.prenom }}</h5> #}
    {#                        <p class="mb-0 font-weight-normal text-sm">{{ employe.poste ? employe.poste.libelle : 'Non attribué' }}</p> #}
    {#                    </div> #}
    {#                </div> #}
    {#                <div class="col-auto ms-auto d-flex align-items-center"> #}
    {#                    <a href="{{ path('employes_index') }}" class="btn btn-outline-secondary"> #}
    {#                        <i class="material-symbols-rounded">arrow_back</i> Retour #}
    {#                    </a> #}
    {#                </div> #}
    {#            </div> #}
    {#            <div class="row"> #}
    {#                <div class="col-12 col-xl-6"> #}
    {#                    <div class="card card-plain h-100"> #}
    {#                        <div class="card-header pb-0 p-3"> #}
    {#                            <h6 class="mb-0">Informations personnelles</h6> #}
    {#                        </div> #}
    {#                        <div class="card-body p-3"> #}
    {#                            <ul class="list-group"> #}
    {#                                <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark">Email:</strong> &nbsp; {{ employe.email ?? 'Non spécifié' }}</li> #}
    {#                                <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark">Téléphone Personnel:</strong> &nbsp; {{ employe.telephonePersonnel ?? 'Non Spécifié' }}</li> #}
    {#                                <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark">Téléphone Corporate:</strong> &nbsp; {{ employe.telephoneCorporate ?? 'Non Spécifié' }}</li> #}
    {#                            </ul> #}
    {#                        </div> #}
    {#                    </div> #}
    {#                </div> #}
    {#                <div class="col-12 col-xl-6"> #}
    {#                    <div class="card card-plain h-100"> #}
    {#                        <div class="card-header pb-0 p-3"> #}
    {#                            <h6 class="mb-0">Matériel Affecté</h6> #}
    {#                        </div> #}
    {#                        <div class="card-body p-3"> #}
    {#                            <ul class="list-group"> #}
    {#                                {% for affectation in employe.affectations %} #}
    {#                                    <li class="list-group-item border-0 ps-0 text-sm"> #}
    {#                                        <strong class="text-dark">{{ affectation.materiel.marque.libelle | default('N/A') }} - {{ affectation.materiel.immatriculation | default('N/A') }}</strong> #}
    {#                                    </li> #}
    {#                                {% else %} #}
    {#                                    <li class="list-group-item border-0 ps-0 text-sm">Aucune affectation</li> #}
    {#                                {% endfor %} #}
    {#                            </ul> #}
    {#                        </div> #}
    {#                    </div> #}
    {#                </div> #}
    {#                <div class="col-12 mt-4"> #}
    {#                    <div class="mb-5 ps-3"> #}
    {#                        <h6 class="mb-1">Documents</h6> #}
    {#                        <p class="text-sm">Pièces justificatives de l'employé</p> #}
    {#                    </div> #}
    {#                    <div class="row"> #}
    {#                        {% set documents = { #}
    {#                            'copieCarteId': "Pièce d'Identité", #}
    {#                            'copieDiplome': "Diplôme", #}
    {#                            'certificatAcquiteVisuel': "Certificat Visuel" #}
    {#                        } %} #}

    {#                        {% set hasDocuments = false %} #}

    {#                        {% for key, label in documents %} #}
    {#                            {% set doc = attribute(employe, key) %} #}
    {#                            {% if doc %} #}
    {#                                {% set hasDocuments = true %} #}
    {#                                <div class="col-xl-3 col-md-6 mb-xl-0 mb-4"> #}
    {#                                    <div class="card card-blog card-plain"> #}
    {#                                        <div class="card-header p-0 m-2"> #}
    {#                                            <a class="d-block shadow-xl border-radius-xl"> #}
    {#                                                {% if doc matches '/\.pdf$/' %} #}
    {#                                                    <img src="{{ asset('assets/images/pdf-placeholder.png') }}" alt="PDF" class="img-fluid shadow border-radius-lg"> #}
    {#                                                {% else %} #}
    {#                                                    <img src="{{ asset('uploads/' ~ doc) }}" alt="Document" class="img-fluid shadow border-radius-lg"> #}
    {#                                                {% endif %} #}
    {#                                            </a> #}
    {#                                        </div> #}
    {#                                        <div class="card-body p-3"> #}
    {#                                            <p class="mb-0 text-sm">{{ label }}</p> #}
    {#                                            <a href="{{ asset('uploads/' ~ doc) }}" target="_blank"> #}
    {#                                                <button type="button" class="btn btn-outline-primary btn-sm mb-0">Voir le document</button> #}
    {#                                            </a> #}
    {#                                        </div> #}
    {#                                    </div> #}
    {#                                </div> #}
    {#                            {% endif %} #}
    {#                        {% endfor %} #}

    {#                        {% if not hasDocuments %} #}
    {#                            <p class="text-center text-muted">Aucun document n'a été ajouté pour cet employé.</p> #}
    {#                        {% endif %} #}
    {#                    </div> #}
    {#                </div> #}
    {#            </div> #}
    {#        </div> #}
    {#    </div> #}

    {# {% endblock %} #}
