{% extends 'base_table.html.twig' %}

{% block title %}Affectations{% endblock %}

{% block breadcrumb %}Affectations{% endblock %}
{% block  breadcrumb_item %}Affectations{% endblock %}
{% block  breadcrumb_t %} Liste des Affectations{% endblock %}
{% block table_titre %}Liste des Affectations{% endblock %}
 {% block btntitle %}Ajouter une Affectations{% endblock %}
{% block btnpath %}{{ path('affectations_create') }}{% endblock %}
{% block tableContent %}
<thead>
<tr>
    <th class="col">N°</th>
    <th class="col">Matériel</th>
    <th class="col">Employé</th>
    <th class="col">Société</th>
    <th class="col">Date d'Affectation</th>
    <th class="col">Actions</th>
</thead>
<tbody>
<tbody>

{% for affectation in pagination %}
    <tr>
        <td class="align-middle text-center text-xs font-weight-bold">{{ loop.index }}</td>
        <td class="align-middle text-xs font-weight-bold">
            {{ affectation.materiel.marque.libelle ?: 'N/A' }} -
            {{ affectation.materiel.immatriculation ?: 'N/A' }}
        </td>
        <td class="align-middle text-xs font-weight-bold">
            {{ affectation.employe.prenom ?: 'N/A' }} {{ affectation.employe.nom ?: '' }}
        </td>
        <td class="align-middle text-xs font-weight-bold">
            {{ affectation.societe.nom ?: 'N/A' }}
        </td>
        <td class="align-middle text-center text-xs font-weight-bold">
            {{ affectation.dateAffectation ? affectation.dateAffectation|date('d-m-Y') : 'N/A' }}
        </td>
        <td class="align-middle text-center">
            <div class="common-align gap-2 justify-content-start">
                <a href="{{ path('affectations_show', {'id': affectation.id}) }}"
                   title="Plus de details">
                    <i class="fa fa-eye"></i>
                </a>
                <form action="{{ path('affectations_cancel', { 'id': affectation.id }) }}" method="POST"
                      class="d-inline">
                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ affectation.id) }}">
                    <a type="submit"
                       onclick="return confirm('Êtes-vous sûr de vouloir annuler cette affectation ?');"
                       title="Annuler cette affectation">
                        <i class="fa fa-trash"></i>

                    </a>
                </form>
            </div>
        </td>
    </tr>
{% else %}
    <tr>
        <td colspan="6" class="text-center text-secondary">Aucune affectation trouvée.</td>
    </tr>
{% endfor %}
</tbody>
{% endblock %}
{% block pagination %}

    <!-- Pagination -->
    {% if pagination.getTotalItemCount() > 10 %}
        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
                {% if pagination.currentPageNumber > 1 %}
                    <li class="page-item">
                        <a class="page-link"
                           href="{{ path('employes_index', {'page': pagination.currentPageNumber - 1}) }}">
                            <span class="material-symbols-rounded">keyboard_arrow_left</span>
                        </a>
                    </li>
                {% endif %}

                {% for page in 1..pagination.pageCount %}
                    <li class="page-item {% if page == pagination.currentPageNumber %}active{% endif %}">
                        <a class="page-link" href="{{ path('employes_index', {'page': page}) }}">{{ page }}</a>
                    </li>
                {% endfor %}

                {% if pagination.currentPageNumber < pagination.pageCount %}
                    <li class="page-item">
                        <a class="page-link"
                           href="{{ path('employes_index', {'page': pagination.currentPageNumber + 1}) }}">
                            <span class="material-symbols-rounded">keyboard_arrow_right</span>
                        </a>
                    </li>
                {% endif %}
            </ul>
        </nav>
    {% endif %}

{% endblock %}

