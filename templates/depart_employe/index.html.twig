{% extends 'base_table.html.twig' %}

{% block title %}Départs Employés{% endblock %}

{% block breadcrumb %}DÉPARTS EMPLOYÉS{% endblock %}
{% block  breadcrumb_item %}Départs Employés{% endblock %}
{% block  breadcrumb_t %} Gestion Départs Employés{% endblock %}
{% block table_titre %}Liste des Départs{% endblock %}
 {% block btntitle %}Ajouter un depart{% endblock %}
{% block btnpath %}{{ path('depart_employe_create') }}"{% endblock %}
{% block tableContent %}
<thead>
<tr>
    <th class="col">N°</th>
    <th class="col">Nom</th>
    <th class="col">Prenoms</th>
    <th class="col">Poste</th>
    <th class="col">Date de départ</th>
    <th class="col">Motif</th>

    <th class="col">Actions</th>
</thead>
<tbody>
{% for depart in pagination %}
    <tr>
        <td class="align-middle text-center text-xs font-weight-bold">{{ loop.index }}</td>
        <td class="align-middle text-xs font-weight-bold">{{ depart.employe.nom }}</td>
        <td class="align-middle text-xs font-weight-bold">{{ depart.employe.prenom }}</td>
        <td class="align-middle text-xs font-weight-bold">{{ depart.employe.poste ? depart.employe.poste.libelle : 'Non défini' }}</td>
        <td class="align-middle text-center text-xs font-weight-bold">{{ depart.dateDepart ? depart.dateDepart|date('d/m/Y') : 'N/A' }}</td>
        <td class="align-middle text-xs font-weight-bold">{{ depart.motif ?: 'Non précisé' }}</td>
        <td class="align-middle text-center">
            <div class="common-align gap-2 justify-content-start">
                <a href="{{ path('depart_employe_edit', {'id': depart.id}) }}"
                   title="Modifier">
                    <i class="far fa-edit"></i>
                </a>
            <form action="{{ path('depart_employe_delete', {id: depart.id}) }}" method="POST" class="d-inline">
                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ depart.id) }}">
                <a type="submit" class="btn btn-danger btn-xs" onclick="return confirm('Êtes-vous sûr de vouloir ' +
                 'supprimer ce départ ?');">
                    <i class="fa fa-trash"></i><a/>
            </form>
            </div>
        </td>
    </tr>
{% else %}
    <tr>
        <td colspan="7" class="text-center text-secondary">Aucun départ enregistré.</td>
    </tr>
{% endfor %}
</tbody>
{% endblock %}
{% block pagination %}
    <!-- Pagination -->
    {% if pagination.getTotalItemCount() > 10 %}
        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
                {% if pagination.currentPageNumber > 1 %}
                    <li class="page-item">
                        <a class="page-link" href="{{ path('depart_employe_index', {'page': pagination.currentPageNumber - 1}) }}">
                            <span class="material-symbols-rounded">keyboard_arrow_left</span>
                        </a>
                    </li>
                {% endif %}

                {% for page in 1..pagination.pageCount %}
                    <li class="page-item {% if page == pagination.currentPageNumber %}active{% endif %}">
                        <a class="page-link" href="{{ path('depart_employe_index', {'page': page}) }}">{{ page }}</a>
                    </li>
                {% endfor %}

                {% if pagination.currentPageNumber < pagination.pageCount %}
                    <li class="page-item">
                        <a class="page-link" href="{{ path('depart_employe_index', {'page': pagination.currentPageNumber + 1}) }}">
                            <span class="material-symbols-rounded">keyboard_arrow_right</span>
                        </a>
                    </li>
                {% endif %}
            </ul>
        </nav>
    {% endif %}
{% endblock %}

